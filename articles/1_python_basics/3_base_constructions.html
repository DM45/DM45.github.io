<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="../../css/bootstrap.min.css">
  <title>Основные конструкции</title>
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="../../index.html" style="">К списку статей</a>
  </nav>
  <div class="container lead" style="margin-top: 100px; margin-left: 25px;">
    <h3>Коротко о главных управляющих конструкциях</h3>
<p>Сейчас мы совсем реактивно пройдёмся по самым основным управляющим конструкциям. Гет реди.</p>
<h3>if</h3>
<p>Ну, вы все знаете условный оператор, так ведь?</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Никаких тебе сигарет. Ишь чего удумал!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Вам синий или красный?&#39;</span><span class="p">)</span>
</pre></div>


<p>Есть ещё <code>elif</code>, их можно сделать много в одном операторе. Это такой аналог <code>which</code> из других языков.</p>
<h3>for</h3>
<p>Цикл. Вместо сишного варианта с init, cond и loop выражениями, тут просто итерация по коллекции:</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">user</span>
</pre></div>


<p>Иногда надо не пройтись по списку, а выполнить одну и ту же операцию много раз. Тогда хорошо подходит функция
<a href="https://docs.python.org/3.5/library/functions.html#func-range">range</a>. Она возвращает целые числа в заданном промежутке,
поэтому в цикле её можно использовать так:</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">level_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">user</span><span class="o">.</span><span class="n">levelup</span><span class="p">()</span>  <span class="c1"># пользователь получит десять уровней. Читер!</span>
</pre></div>


<p>А вот <code>break</code> и <code>continue</code> делают то же, что в Паскале и Сях. <code>break</code> прерывает выполнение цикла,
<code>continue</code> завершает текущую итерацию и переходит к следующей.</p>
<p>Ещё у цикла есть <code>else</code>, но про него почти никто не знает. Как он работает можно посмотреть
<a href="https://docs.python.org/3.5/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops">в официальной документации</a>.</p>
<h3>def</h3>
<p>Начало объявления функции. После него идёт название,
потом – аргументы функции в скобках, двоеточие и тело функции с отступом:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_square</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>


<p>То, что после <code>return</code> – это возвращаемое значение функции.</p>
<p>Функцию создали, вот как её теперь использовать:</p>
<div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">get_square</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c1"># 4</span>
<span class="k">print</span><span class="p">(</span><span class="n">get_square</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>  <span class="c1"># 36</span>
<span class="k">print</span><span class="p">(</span><span class="n">get_square</span><span class="p">(</span><span class="s1">&#39;ыыы&#39;</span><span class="p">))</span>  <span class="c1"># всё сломается</span>
</pre></div>


<p>А вот пример посложнее, из исходников Девмана. Получает пользователя по айди в Слаке:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_get_user_by_slack_id</span><span class="p">(</span><span class="n">slack_user_id</span><span class="p">):</span>
    <span class="n">user_email</span> <span class="o">=</span> <span class="n">get_slack_email_for_user</span><span class="p">(</span><span class="n">slack_user_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email__iexact</span><span class="o">=</span><span class="n">user_email</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre></div>


<p>(вот почему емейл необходим)</p>
<h3>range</h3>
<p>Функция очень полезная, поэтому про неё отдельно. <code>range</code> генерирует целые числа в заданном диапазоне. Например:</p>
<div class="codehilite"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 0..0</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># 5..9</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># [5, 7, 9] (от пяти до девяти с шагом два)</span>
</pre></div>


<p>Фишка этой функции заключается в том, что она не создаёт список со всеми числами.
Вместо этого он вернёт объект, который будет возвращать элементы как только они нужны, по одному.
Поэтому код <code>range(9999999999999)</code> не съест всю память.
Этот хитрый объект (Sequence ABC, но об этом потом) можно превратить в список явно:</p>
<div class="codehilite"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">9999999999999</span><span class="p">))</span>
</pre></div>


<p>(не советую так делать)</p>
<h3>pass</h3>
<p>Блок, который ничего не делает:</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="k">pass</span>  <span class="c1"># 20 раз сделать ничего. Очень полезно!</span>
</pre></div>


<p>Часто используется в начальном коде для заданий: в финальной версии вместо <code>pass</code> должен быть настоящий код.</p>
  </div>
</body>
</html>